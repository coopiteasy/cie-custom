<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="report_supplier_certificate_document">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang)" />
                    <t t-set="address">
                        <p id="partner_info">
                            <strong>Donator:</strong>
                        </p>
                        <div
                            t-field="o.partner_id"
                            t-options='{"widget": "contact", "fields": ["address", "name", "phone", "mobile", "fax", "email"], "no_marker": true, "phone_icons": true}'
                        />
                        <p t-if="o.partner_id.vat">VAT: <span
                                t-field="o.partner_id.vat"
                            /></p>
                    </t>
                    <div class="page">
                        <div class="mt-4" id="title">
                            <h1>Certificate of donation of unsold food</h1>
                        </div>
                        <div class="mt-4" id="legal_disclaimer">
                            <p>
                                This donation takes place within the
                                framework of the public market T'as de
                                Beaux Restes set up by the municipality
                                of Ixelles and with the aim of
                                redistribution to social organizations.
                            </p>
                            <p>
                                <span
                                    t-field="res_company.partner_id.name"
                                /> undertakes:
                                <ul>
                                    <li>
                                        not to use the goods received
                                        for commercial purposes.
                                    </li>
                                    <li>
                                        to use the goods received for a
                                        social action in favor of needy
                                        people.
                                    </li>
                                    <li>
                                        not to ask for any compensation
                                        when distributing these goods,
                                        except for a possible financial
                                        contribution which cannot exceed
                                        the expenses directly linked to
                                        this distribution.
                                    </li>
                                </ul>
                            </p>
                            <p>
                                Attached to this form are all
                                the lists of donations made during the period from
                                <span t-field="o.start_date" /> to
                                <span t-field="o.end_date" />.
                            </p>
                        </div>
                        <div class="mt-4" id="purchase_order_list_title">
                            <h3>Details of donations</h3>
                        </div>
                        <t t-if="not o.purchase_order_ids">
                             <p>No donation for this period.</p>
                        </t>
                        <t t-else="">
                            <div
                                class="row mt-4"
                                t-foreach="o.purchase_order_ids"
                                t-as="purchase_order"
                            >
                                <div class="col-6">
                                    <p>
                                        Name: <span t-field="purchase_order.name" />
                                    </p>
                                </div>
                                <div class="col-6">
                                    <p>
                                        Date of Approval: <span
                                            t-field="purchase_order.date_approve"
                                        />
                                    </p>
                                </div>
                          </div>
                          <div class="row" id="purchase_order_lines">
                              <div class="col-12">
                                  <table class="table table-sm">
                                      <thead>
                                          <tr>
                                              <th>
                                                  <strong>Description</strong>
                                              </th>
                                              <th class="text-right">
                                                  <strong>Quantity</strong>
                                              </th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                          <tr
                                                t-foreach="purchase_order.order_line"
                                                t-as="l"
                                            >
                                              <td>
                                                  <span t-field="l.name" />
                                              </td>
                                              <td class="text-right">
                                                  <span t-field="l.product_qty" />
                                              </td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                        </t>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>
